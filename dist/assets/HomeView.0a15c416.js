import{_ as y,o as l,c as a,a as s,F as C,r as v,t as d,b as f,d as S,w as m,e as _,f as p,g as b,h as O,v as F,i as x,j as g}from"./index.86363066.js";const $={props:{selectName:{type:String,default:"selectName"},selectId:{type:String,default:"selectId"},selectHandler:{type:Function},selectOptions:{type:Array,default:()=>[{value:"example1",text:"Example 1"},{value:"example2",text:"Example 2"}]}},data(){return{elementOptions:{defaultSelectClass:".default-select",showClass:"show",selectedClass:"selected"}}},methods:{createCustomSelect(){this.defaultSelect=this.$el.querySelector(this.elementOptions.defaultSelectClass),this.options=this.getFormattedOptions(this.defaultSelect.querySelectorAll("option")),this.selectedOption=this.options.find(e=>e.selected),this.customEl=document.createElement("div"),this.labelEl=document.createElement("span"),this.optionsCustomEl=document.createElement("ul"),this.customSelectSetup(),this.defaultSelect.style.display="none",this.$el.append(this.customEl)},selectValue(e){const t=this.options.find(i=>i.value===e),o=this.selectedOption;o.selected=!1,o.element.selected=!1,t.selected=!0,t.element.selected=!0,this.labelEl.textContent=t.label,this.selectedOption=this.options.find(i=>i.selected)},customSelectSetup(){this.customEl.classList.add("custom-select-container"),this.customEl.tabIndex=0,this.labelEl.classList.add("custom-select-value"),this.labelEl.textContent=this.selectedOption.label,this.customEl.append(this.labelEl),this.optionsCustomEl.classList.add("custom-select-options"),this.options.forEach(e=>{const t=document.createElement("li");t.classList.add("custom-select-option"),t.classList.toggle(this.elementOptions.selectedClass,e.selected),t.textContent=e.label,t.dataset.value=e.value,t.addEventListener("click",()=>{const o=this.$el.querySelector(`[data-value="${this.selectedOption.value}"]`),i=this.defaultSelect.value;o.classList.remove(this.elementOptions.selectedClass),this.selectValue(e.value),t.classList.add(this.elementOptions.selectedClass),i!==this.defaultSelect.value&&this.selectHandler(this.defaultSelect),this.optionsCustomEl.classList.remove(this.elementOptions.showClass)}),this.optionsCustomEl.append(t)}),this.customEl.append(this.optionsCustomEl),this.labelEl.addEventListener("click",()=>this.optionsCustomEl.classList.toggle(this.elementOptions.showClass)),this.customEl.addEventListener("blur",()=>this.optionsCustomEl.classList.remove(this.elementOptions.showClass))},getFormattedOptions(e){return[...e].map(t=>({value:t.value,label:t.label,selected:t.selected,element:t}))}},mounted(){this.createCustomSelect()}},w={class:"custom-select"},k=["name","id"],L=["value"];function N(e,t,o,i,c,h){return l(),a("div",w,[s("select",{class:"default-select",name:o.selectName,id:o.selectId,onChange:t[0]||(t[0]=r=>o.selectHandler(this.$el.querySelector(".default-select")))},[(l(!0),a(C,null,v(o.selectOptions,(r,u)=>(l(),a("option",{key:u,value:r.value},d(r.text),9,L))),128))],40,k)])}var V=y($,[["render",N]]);const A={props:{country:{type:Array,default:()=>[]},countryId:{type:String,default:""},countryCode:{type:String,default:""},countryFlag:{type:String,default:""},countryCapital:{type:Array,default:()=>[]}}},I=["id"],j={class:"card__image"},H=["src","alt"],R={class:"card__content"},B={class:"country__name"},q={class:"country__population"},P=s("span",{class:"country__info-heading"},"Population: ",-1),W={class:"country__region"},D=s("span",{class:"country__info-heading"},"Region: ",-1),M=s("span",{class:"country__info-heading"},"Capital: ",-1);function T(e,t,o,i,c,h){const r=f("RouterLink");return l(),a("div",{class:"country card",id:o.countryCode},[S(r,{to:`/country/${o.countryCode}`,class:"country-link"},{default:m(()=>[s("div",j,[s("img",{class:"country__flag",src:o.countryFlag,alt:`Flag of ${o.countryId}`},null,8,H)]),s("div",R,[s("div",B,[_(e.$slots,"countryName")]),s("div",q,[P,_(e.$slots,"countryPopulation")]),s("div",W,[D,_(e.$slots,"countryRegion")]),(l(!0),a(C,null,v(o.countryCapital,u=>(l(),a("div",{class:"country__capital",key:u},[M,p(d(u),1)]))),128))])]),_:3},8,["to"])],8,I)}var U=y(A,[["render",T]]);const Y={data(){return{countries:()=>[],searchedCountry:"",searchFailed:!1,searchFailedWithSearchedCountry:"",internationalNumberFormat:new Intl.NumberFormat("en-US"),selectOptions:[{value:"none",text:"Filter by Region"},{value:"Africa",text:"Africa"},{value:"America",text:"America"},{value:"Asia",text:"Asia"},{value:"Europe",text:"Europe"},{value:"Oceania",text:"Oceania"}]}},components:{CustomSelect:V,CountryCard:U},methods:{fetchCountries(){fetch("https://restcountries.com/v3.1/all").then(e=>e.ok?e.json():alert("Countries could not get fetched")).then(e=>{this.countries=e,this.countries.sort(this.compareObjectValues)})},onSubmitSearch(){if(this.searchedCountry===""){this.fetchCountries(),this.searchFailed=!1;return}fetch(`https://restcountries.com/v3.1/name/${this.searchedCountry}`).then(e=>e.ok?e.json():alert("Country was not found and therefore could not get fetched")).then(e=>{if(this.countries=e,this.countries.length===0){this.searchFailedWithSearchedCountry=this.searchedCountry,this.searchFailed=!0;return}this.searchFailed=!1,this.countries.sort(this.compareObjectValues)})},selectHandler(e){const t=e.value;this.showCountriesByRegion(t)},showCountriesByRegion(e){if(e===""||e==="none"){this.fetchCountries();return}fetch(`https://restcountries.com/v3.1/region/${e}`).then(t=>t.ok?t.json():alert("Countries of region could not get fetched")).then(t=>{this.countries=t,this.countries.sort(this.compareObjectValues)})},compareObjectValues(e,t){return e.name.common>t.name.common?1:e.name.common<t.name.common?-1:0}},mounted(){this.fetchCountries()}},z={class:"search-filter"},G={class:"input-wrapper"},J=s("button",{type:"submit",class:"search__button"},[s("i",{class:"fa fa-search"})],-1),K={class:"input-wrapper"},Q={class:"content-container"},X={key:0,class:"cards-wrapper"},Z={key:1,class:"search-error"};function ee(e,t,o,i,c,h){const r=f("CustomSelect"),u=f("CountryCard");return l(),a("main",null,[s("div",z,[s("div",G,[s("form",{class:"form-search",onSubmit:t[1]||(t[1]=b((...n)=>h.onSubmitSearch&&h.onSubmitSearch(...n),["prevent"]))},[J,O(s("input",{class:"search__input",type:"text",placeholder:"Search...",name:"search","onUpdate:modelValue":t[0]||(t[0]=n=>c.searchedCountry=n)},null,512),[[F,c.searchedCountry]])],32)]),s("div",K,[S(r,{selectName:"regionFilter",selectId:"regionSelect",selectHandler:h.selectHandler,selectOptions:c.selectOptions},null,8,["selectHandler","selectOptions"])])]),s("div",Q,[c.searchFailed?g("",!0):(l(),a("div",X,[(l(!0),a(C,null,v(this.countries,(n,E)=>(l(),x(u,{key:E,countryId:n.name.common,countryCode:n.cca3,countryFlag:n.flags.png,countryCapital:n.capital},{countryName:m(()=>[p(d(n.name.common),1)]),countryPopulation:m(()=>[p(d(c.internationalNumberFormat.format(n.population)),1)]),countryRegion:m(()=>[p(d(n.region),1)]),_:2},1032,["countryId","countryCode","countryFlag","countryCapital"]))),128))])),c.searchFailed?(l(),a("div",Z,[s("p",null,"Your search of "+d(c.searchFailedWithSearchedCountry)+" has failed",1)])):g("",!0)])])}var se=y(Y,[["render",ee]]);export{se as default};
